Refatoração.

Substitui a implementação mais simples possível por uma solução abstrata.